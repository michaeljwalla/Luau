local stats = require(game:GetService("ReplicatedStorage").ClientStatCache)
local questm = require(game:GetService("ReplicatedStorage").Quests)

local bears = {
    ['Honey Bee'] = 0,
    ['Black Bear'] = 3600,
    ['Brown Bear'] = 3600,
    ['Bucko Bee'] = 0,
    ['Riley Bee'] = 0,
    ['Polar Bear'] = 0
}

local quests = {}
quests.update = function(self)
    local new = stats:Update('Quests')
    self.raw = new
    return
end
quests:update()


quests.repeatables = function(self)
    local reps =  {}
    for i,v in pairs(self.raw.Active) do
        local quest = questm:Get(v.Name)
        if not quest.Hidden and quest.Repeatable then table.insert(reps, quest) end
    end
    return reps
end
quests.active = function(self)
    local reps =  {}
    for i,v in pairs(self.raw.Active) do
        table.insert(reps, questm:Get(v.Name))
    end
    return reps
end
quests.progress = function(self, name)
    local prog = questm:Progress(name, stats:Get()) --index 1 is percentage complete (0-1), index 2 is the total collected (exceeds limit)
    local desc = questm:Get(name)
    return prog, desc
end
quests.hasCompleted = function(self, name) --FlaggedComplete not seeming to work idk
    local prog = self:progress(name)
    if not prog then return false end
    for i,v in pairs(prog) do if v[1] ~= 1 then return false end end
    return true
end
quests.canRecieve = function(self, what)
    return (self.raw.PoolTimers[what] and bears[what])
    and (tick()-bears[what] >= self.raw.PoolTimers[what])
end
x = quests:progress("Bean Bug Busser")
for i,v in pairs(x) do print(v,table.concat(v, ', ')) end