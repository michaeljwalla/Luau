if _G.camlook then _G.camlook:Disconnect() end
local Camera = workspace.CurrentCamera
local Player = game.Players.LocalPlayer
 
local Character = Player.Character
local Root = Character:WaitForChild("HumanoidRootPart")
local Neck = Character:FindFirstChild("Neck", true)
local YOffset = Neck.C0.Y
 
local CFNew, CFAng = CFrame.new, CFrame.Angles
local asin = math.asin
local ts, debris = game:GetService("TweenService"), game:GetService("Debris")
local function tween(neck, cf, time)
    time = time or 0.2
    local new = ts:Create(neck, TweenInfo.new(time, Enum.EasingStyle.Quad), {C0 = cf})
    new:Play()
    debris:AddItem(new, time)
end
_G.camlook = game:GetService("RunService").RenderStepped:Connect(function()
    Character = Player.Character
    if not Character then return end
    Root = Character:FindFirstChild("HumanoidRootPart")
    Neck = Character:FindFirstChild("Neck", true)
    if not (Root and Neck) then return end
    CameraDirection = Root.CFrame:toObjectSpace(Camera.CFrame).lookVector
    if Neck then
        if Character.Humanoid.RigType == Enum.HumanoidRigType.R15 then
            tween(Neck, CFNew(0, YOffset, 0) * CFAng(0, -asin(CameraDirection.x), -0,0) * CFAng(asin(CameraDirection.y), 0, 0))
        elseif Character.Humanoid.RigType == Enum.HumanoidRigType.R6 then
            tween(Neck, CFNew(0, YOffset, 0) * CFAng(3 * math.pi/2, 0, math.pi) * CFAng(0, 0, -asin(CameraDirection.x)) * CFAng(math.clamp(-asin(CameraDirection.y), -0.5, 0.5), 0, 0))
        end
    end
end)