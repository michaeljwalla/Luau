--steal ppls art in starving artists (works in conjunction w loadart.lua)

if not isfile('stolenart.json') then writefile('stolenart.json','[]') end
function json(tbl)
    return game:GetService("HttpService"):JSONEncode(tbl)
end
function unjson(str)
    return game:GetService("HttpService"):JSONDecode(str)
end

function notify(title, text, duration, icon)
    local options = {}
    if not title and text then return end
    options.Title = title
    options.Text = text
    if duration then options.Duration = duration else do options.Duration = 5 end end
    if icon then options.Icon = icon end
    game.StarterGui:SetCore("SendNotification", options)
end
local storage = unjson(readfile('stolenart.json'))
function snipeart(who, canvas)
    if who == '' then return end
    who, canvas = tostring(who), tostring(canvas)
    for i,v in pairs(game.Players:GetPlayers()) do
        if string.lower(v.Name):find(string.lower(who)) == 1 then who = v.Name break end
    end
    local worked, retval = pcall(function() return game:GetService("Workspace").Plots[tostring(who)].Easels[tostring(canvas)].Canvas.SurfaceGui.Grid end)
    if not worked then return false, notify('Error', retval) end

    local newsave = {}
    for i,v in pairs(retval:GetChildren()) do
        if tonumber(v.Name) then
            newsave[v.Name] = 'return Color3.new('..tostring(retval[v.Name].BackgroundColor3)..')'
        end
    end
    local duped = true
    for i,v in pairs(storage) do
        for a,x in pairs(v) do
            if newsave[a] ~= x then duped = false break end 
        end
    end
    if duped and #storage > 0 then notify('Error', 'This piece is already saved!') return end
    table.insert(storage, newsave)
    writefile('stolenart.json', json(storage))
    notify('Success', 'Stole piece '..canvas..' from '..who)
end
if _G.easels then _G.easels:Disconnect() end
local defbb = Instance.new("BillboardGui")
defbb.Size = UDim2.new(0,25,0,25)
defbb.AlwaysOnTop = true
defbb.MaxDistance = 50
defbb.ExtentsOffset = Vector3.new(0,1.5,0)
defbb.Active = true
defbb.Name = 'Number'
local frame = Instance.new("TextLabel", defbb)
frame.Name = "Button"
frame.Size = UDim2.new(1,0,1,0)
frame.Text = ""
_G.easels = game:GetService("Workspace").Plots.DescendantAdded:Connect(function(v)
    if v.Parent.Name ~= 'Easels' then return end
    local canvas = v:WaitForChild("Canvas", 30)
    if not canvas then return end
    if canvas:FindFirstChild("Number") then canvas.Number:Destroy() end
    local newui = defbb:Clone()
    newui.Parent = canvas
    newui.Button.Text = tostring(v.Name)
end)
for i,v in pairs(game.Workspace.Plots:GetDescendants()) do
    if not v.Parent or (v.Parent and v.Parent.Name ~= 'Easels') then continue end
    local canvas = v:WaitForChild("Canvas", 30)
    if not canvas then continue end
    if canvas:FindFirstChild("Number") then canvas.Number:Destroy() end
    local newui = defbb:Clone()
    newui.Parent = canvas
    newui.Button.Text = tostring(v.Name)
end
snipeart('inv',1)