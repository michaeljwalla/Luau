local mainMan = "<your_username_here>"
local gearmode = 'heal'
--i will not be releasing my latest game-breaking exploit (yet) :)
if _G.antisdafk then _G.antisdafk:Disconnect() end
if _G.antiafk then _G.antiafk:Disconnect() end
if _G.chatchange then _G.chatchange:Disconnect() end
if _G.leaveonleave then _G.leaveonleave:Disconnect() end
if _G.refocus then _G.refocus:Disconnect() end
if _G.refocus2 then _G.refocus2:Disconnect() end
if _G.refocus3 then _G.refocus3:Disconnect() end
if _G.mobcheck then _G.mobcheck:Disconnect()end
_G.antisdafk = game.Players.LocalPlayer.PlayerGui.ChildAdded:Connect(function(v)
    if v.Name == 'QuestionGui' then
        local x = v:WaitForChild"Notice":WaitForChild"Question".Text
        local y = v.Notice:WaitForChild"TextBox"
        local z = v.Notice:WaitForChild"Close"
        local numbers = x:match"%d %+ %d":split" + "
        local sum = tonumber(numbers[1]) + tonumber(numbers[2])
        y.Text = tostring(sum)
        task.wait(6)
        firesignal(z.MouseButton1Down)
    end
end)

local lp = game.Players.LocalPlayer
assert(lp.Name ~= mainMan, 'phew')
setfpscap(25)

local vu = game:GetService("VirtualUser")
_G.antiafk = game.Players.LocalPlayer.Idled:connect(function()
	vu:CaptureController ()
    vu:ClickButton2(Vector2.new())
end)

local focus = mainMan
local mode = 0 --0 is circle 1 is rand
local radius = 30

local function getchar()
    return lp.Character and lp.Character:FindFirstChild"Right Arm"
end
local function getRootOf(char)
    return game.Players:FindFirstChild(char) and game.Players[char].Character and game.Players[char].Character:FindFirstChild"HumanoidRootPart"
end
local skip = {'FireServer','Kick'}
local function nothing() return end
local placeholder = {CFrame = CFrame.new(0,0,0), Velocity = Vector3.zero}
_G.lastpos = placeholder
local lp = game.Players.LocalPlayer
local mouse = lp.GetMouse(lp)
if not _G.old then
    _G.old = hookmetamethod(game, '__namecall', newcclosure(function(self, ...)
        local script, method = getcallingscript(), getnamecallmethod()
        if not checkcaller() and script.Name == '...' and table.find(skip,method) then
            return nothing()
        end
        return _G.old(self, ...)
    end))
end
if not _G.old2 then
    _G.old2 = hookmetamethod(mouse, '__index', newcclosure(function(self, index)
        local scr = getcallingscript()
        local part = _G.lastpos
        if index == 'Hit' and scr and scr.Parent.Name == 'Healing Staff' and part then
            local result = part.CFrame + part.Velocity*Vector3.new(1,0,1)
            return result
        end
        return _G.old2(self, index)
    end))
end


_G.atk = _G.atk or {}
local attackme = _G.atk

_G.mobcheck = workspace.Disaster.DescendantAdded:Connect(function(c)
        if not c:IsA"Humanoid"  then return end
        local touch = c.Parent:WaitForChild"Head"
        table.insert(attackme, touch)
    end)
local function atkmobsinradius(rad, part)
    local root = getRootOf(focus)
    if not root then return end
    local rpos = root.Position
    for i,v in next, attackme do
        if not (v.Parent and v.Parent:FindFirstChildWhichIsA"Humanoid" and v.Parent:FindFirstChildWhichIsA"Humanoid".Health > 0) then
            rawset(attackme, i, nil)
            continue
        elseif v.Parent.Name:find"Reaper" and workspace.Effects:FindFirstChild"SpellCircle" then
            continue
        elseif (rpos - v.Position).Magnitude <= rad then
            firetouchinterest(part, v, 0)
            firetouchinterest(part, v, 1)
        end
    end
end
local curbag = lp.Backpack
_G.toPos = Vector3.zero

local function nothing() return end
local function randomVector()
	local flip1,flip2,flip3 = (math.random() < 0.5 and 1 or -1),(math.random() < 0.5 and 1 or -1),(math.random() < 0.5 and 1 or -1)
	return Vector3.new(math.random()*flip1,math.random()*flip2,math.random()*flip3)
end
local toRad = math.pi/180
local function getVectorChoice(x)
    if mode == 1 then
        return randomVector() * 25
    elseif mode == 2 then
        return randomVector() * 50
    else
        return Vector3.new(math.sin(x*toRad),math.sin(x*toRad*5),math.cos(x*toRad)) * Vector3.new(15,2,15)
    end
end

local function update(val)
    local arm, toPos = getchar(), getRootOf(focus)
    if not arm then return end
    local hs, transpose
    if gearmode == 'heal' then
        hs = lp.Character:FindFirstChild"Healing Staff" or lp.Backpack:FindFirstChild"Healing Staff"
        if not (hs and hs:FindFirstChild"Handle" and arm and toPos) then return end
        hs.Handle.Massless = true
        getsenv(hs:WaitForChild"LocalScript").SetAnimation = nothing
        transpose = (arm.Position - (toPos.Position +  getVectorChoice(val)))
        transpose = Vector3.new(-transpose.X,-transpose.Z,-transpose.Y)
        
    elseif gearmode == 'atk' then
        hs = lp.Character:FindFirstChild"Darkheart" or lp.Backpack:FindFirstChild"Darkheart"
        if not (hs and hs:FindFirstChild"Handle" and arm and toPos) then return end
        hs.Handle.Massless = true
        hs:WaitForChild"AnimationScript".Disabled = true
        
        transpose = (arm.Position - (toPos.Position +  getVectorChoice(val)))
        transpose = Vector3.new(transpose.Y,transpose.X,-transpose.Z)
        
    end
    if not hs then return end
    for i,v in next, lp.Character:GetChildren() do if v:IsA"Tool" then v.Parent = lp.Backpack  end end
    hs.Parent = lp.Backpack
    _G.lastpos = toPos
    --hs.GripPos = transpose
    if gearmode == 'atk' then
        hs.GripForward, hs.GripRight, hs.GripUp = Vector3.new(-1),Vector3.new(0,1),Vector3.new(0,0,1)
    end
    hs.Parent = lp.Character
    task.defer(function()
        --if gearmode == 'heal' then hs:Activate() end
        hs:Activate()
    end)

end
_G.refocus = lp.CharacterAdded:Connect(function(v)
    v:WaitForChild"Animate".Disabled = true
end)
local t = tick()
local x = 0
local lastchar = lp.Character
_G.refocus2 = game.RunService.Heartbeat:Connect(function()
    if tick() - t < 0.05 then return end
    if lp.Character ~= lastchar then t = tick()  + 1 lastchar = lp.Character return end
    t = tick()
    update(x)
    x = x + 5

    if gethiddenproperty(lp, "SimulationRadius") > 5 then sethiddenproperty(lp, "SimulationRadius", 5) end
end)
_G.refocus3 = game.RunService.RenderStepped:Connect(function()
    if not lp.Character then return end
    for i,v in next, lp.Character:GetChildren() do if v:IsA"BasePart" then v.CanTouch = false v.CanCollide = false end end
    pcall(function()
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(getRootOf(focus).Position * Vector3.new(1,0,1)) + (getRootOf(focus).CFrame.LookVector*_G.LookVecForward) + _G.moveTo.p
        game.Players.LocalPlayer.Character.HumanoidRootPart.Velocity = Vector3.zero
    end)
    if gearmode == 'atk' then
        local h = lp.Character:FindFirstChild"Darkheart" or lp.Backpack:FindFirstChild"Darkheart"
        h = h and h:FindFirstChild"Handle"
        if not h then return end
        atkmobsinradius(radius, h)
    end
end)


--[[if getgenv().sock then pcall(function() getgenv().sock:Close() end) end
task.wait(0.1)
getgenv().sock = syn.websocket.connect('ws://localhost:3000')

pcall(function() game.CoreGui.SocketControl:Destroy() end)
local lp = game.Players.LocalPlayer

local uis = game:GetService'UserInputService'
local container = Instance.new("ScreenGui", game.CoreGui)
container.Name = 'SocketControl'
local main = Instance.new("TextBox", container)
main.Size = UDim2.new(0,250,0,25)
main.BackgroundColor3 = Color3.new()
main.BorderSizePixel = 0
main.BackgroundTransparency = 0.5
main.TextColor3 = Color3.new(1,1,1)
main.Text = ''
main.Font = 'Gotham'
main.Position = UDim2.new(1,-250,0.5,-main.Size.Y.Offset/2)
main.TextSize = 18
main.Visible = false
local response = Instance.new("TextLabel", main)
response.Size = UDim2.new(1,0,0,100)
response.Position = UDim2.fromOffset(0,main.Size.Y.Offset)
response.BackgroundTransparency = 0.5
response.TextColor3 = Color3.new(1,1,1)
response.BorderSizePixel = 0
response.TextSize = 14
response.TextWrapped = true
response.Font = 'Gotham'
response.TextYAlignment = "Top"
response.Text = "--- Response ---"
if _G.focusLock then _G.focusLock:Disconnect() end
_G.focusLock = uis.InputEnded:Connect(function(key, focused)
    if (focused or key.KeyCode ~= Enum.KeyCode.BackSlash) then return end
    main.Visible = true
    main:CaptureFocus()
end)
main.FocusLost:Connect(function()
    main.Text = main.Text:gsub("^%s*", ""):gsub("%s*$","")
    xpcall(function()
        sock:Send(main.Text)
        main.Visible = false
    end, function(err)
        response.Text = err:gsub("^.*:%d+: ", "")
    end)
    
end)
local dc
dc = sock.OnMessage:Connect(function(msg)
    if not response:IsDescendantOf(game) then dc:Disconnect() return end
    response.Text = "--- Response ---\n\n"..msg.."\n\n"..os.date():match("%d*:%d*:%d*")
    main.Visible = true
    local new
    task.spawn(function()
        main.FocusLost:Wait()
        new = true
    end)
    task.delay(5,function()
        if not new and main.Visible and uis:GetFocusedTextBox() ~= main then main.Visible = false end
    end)
end)

local actual
actual = sock.OnMessage:Connect(function(msg)
    if msg == 'READY' then sock:Send("syncHeal") return end
    if msg:match"^BROADCAST: " then
        msg = msg:gsub("^BROADCAST: ", "")
    end
    if msg:match("^%. [%.%a0-9_]*") then
        local who = msg:match("[%.%a0-9_]*$"):lower()
        if who == '.' then focus = mainMan return end
        for i,v in pairs(game.Players:GetPlayers()) do
            if v ~= lp and v.Name:lower():find(who) == 1 then
                focus = v.Name
                break
            end
        end
    elseif msg:match("^mode %d") then
        local cmode = tonumber(({msg:match"^mode %d":gsub("mode ", "")})[1])
        if cmode <= 1 and cmode >= 0 then mode = cmode end
    elseif msg == 'Equip' and lp.Character and lp.Backpack:FindFirstChild"Healing Staff" then
        lp.Backpack['Healing Staff'].Parent = lp.Character
    elseif msg == 'Activate' and lp.Character then
        local tool = lp.Character:FindFirstChild"Healing Staff"
        if tool then tool:Activate() end
    elseif msg:match"Activate %d+" then
        if lp.Backpack:FindFirstChild'Healing Staff' then lp.Backpack['Healing Staff'].Parent = lp.Character end
        local tool = lp.Character:FindFirstChild"Healing Staff"
        if tool then 
            local time = tonumber(({msg:match"Activate %d+":gsub("Activate ", "")})[1])
            local t = tick()
            print("Activating for "..time.."s")
            
            local con
            con = game.RunService.Heartbeat:Connect(function()
                if not (tick() - t <= time and lp.Character and tool.Parent) then con:Disconnect() return end
                tool:Activate()
            end)
            
        end
    end
end)]]
_G.moveTo = CFrame.new(0,-20, 0)
_G.LookVecForward = 0
_G.chatchange = game.ReplicatedStorage.DefaultChatSystemChatEvents.OnMessageDoneFiltering.OnClientEvent:Connect(function(data)
    if data.FromSpeaker ~= mainMan then return end
    local msg = data.Message
    local format = msg:gsub("%s", "")
    if format:match("^%-?%d+,%-?%d+,%-?%d+$") then
        local args = msg:split(",")
        _G.moveTo = CFrame.new(tonumber(args[1]),tonumber(args[2]),tonumber(args[3]))
        return
    elseif format:match("x%-?%d+") then
        local type = tonumber(format:match"%-?%d+")
        local curp = _G.moveTo
        _G.moveTo = CFrame.new(type, curp and curp.Y or -50, curp and curp.Z or 0)
        return
    elseif format:match("y%-?%d+") then
        local type = tonumber(format:match"%-?%d+")
        local curp = _G.moveTo
        _G.moveTo = CFrame.new(curp and curp.X or 0, type, curp and curp.Z or 0)
        return
    elseif format:match("z%-?%d+") then
        local type = tonumber(format:match"%-?%d+")
        local curp = _G.moveTo
        _G.moveTo = CFrame.new(curp and curp.X or 0, curp and curp.Y or -50, type)
        return
    elseif format:match("l%-?%d+") then
        _G.LookVecForward = tonumber(format:match"%-?%d+")
        return
    end
    if msg:match("^%. [%.%a0-9_]*") then
        local who = msg:match("[%.%a0-9_]*$"):lower()
        if who == '.' then focus = mainMan return end
        for i,v in pairs(game.Players:GetPlayers()) do
            if v ~= lp and v.Name:lower():find(who) == 1 then
                focus = v.Name
                break
            end
        end
    elseif msg:match("^mode %d") then
        local cmode = tonumber(({msg:match"^mode %d":gsub("mode ", "")})[1])
        if cmode then mode = math.clamp(cmode, 0, 2) end
    elseif msg:match("^radius %d") then
        local cmode = tonumber(({msg:match"^radius %d+":gsub("radius ", "")})[1])
        if cmode then radius = math.clamp(cmode, 5, 10000) end
    elseif msg:match("^heal") then
        task.wait(math.random() * 7)
        gearmode = "heal"
    elseif msg:match("^atk") then
        gearmode = 'atk'
    elseif msg == 'die' then
        local hum = lp.Character and lp.Character:FindFirstChildWhichIsA"Humanoid"
        if hum then hum.Health = 0 end
    elseif msg:match("^vote .*") then
        local mapmaybe = lp.PlayerGui:FindFirstChild"MapVoteGui" and lp.PlayerGui.MapVoteGui:FindFirstChild"Frame" and lp.PlayerGui.MapVoteGui.Frame:FindFirstChild"Backdrop"
        if not mapmaybe then return end
        local choice = msg:sub(6):lower():gsub("%s+", "")
        for i,v in next, mapmaybe:GetChildren() do
            local name = v.Name:lower():gsub("%s+", "")
            if name:find(choice) then firesignal(v.MouseButton1Down) return end
        end
    end
end)
local function onLeave(plr)
    --if plr.Name == mainMan then game:Shutdown() end
end
--[[_G.leaveonleave = (function() 
    local find = game.Players:FindFirstChild(mainMan)
    if not find then
        print('waiting for '..mainMan)
        local con
        con = game.Players.PlayerAdded:Connect(function(plr)
            if plr.Name == mainMan then
                con:Disconnect()
                _G.leaveonleave = game.Players.PlayerRemoving:Connect(onLeave)
                print('found '..mainMan)
            end
        end)
        return con
    else
        return game.Players.PlayerRemoving:Connect(onLeave)
    end
end)()]]
--
local gears = require(game.ReplicatedStorage.Modules.Gear).orderedGear
function buykit(e)
	game:GetService("ReplicatedStorage").Remotes.BuyItem:FireServer(e)
	task.wait()
end
function bsGear(name)
    local ind = table.find(gears, name)
    if not ind then return end
    buykit(ind)
end
game.ReplicatedStorage.Remotes.Ready:FireServer()
if not lp.Character then lp.CharacterAdded:Wait() lp:WaitForChild"Backpack" end
if not (lp.Character:FindFirstChild"Healing Staff" or lp.Backpack:FindFirstChild"Healing Staff") then bsGear"Healing Staff" end
if not (lp.Character:FindFirstChild"Darkheart" or lp.Backpack:FindFirstChild"Darkheart") then bsGear"Darkheart" end
lp.Character.Humanoid.Health = 0

setfpscap(25)
game["Run Service"]:Set3dRenderingEnabled(false)