local unchecktbl = {'Fragile Farm','Moonbase','Home Sweet Home','Candy Cloud','Castle Gardens', 'City Park', 'Winterville'}
setmetatable(unchecktbl, {__tostring = function(self) 
    local txt = ''
    for i,v in pairs(self) do txt = txt..tostring(v)..', ' end
    return txt:sub(1,-3)
end})
local function getstuffleft()
    local x = {}
    for i,v in pairs(game.ReplicatedStorage.Maps:GetChildren()) do
        
    end
end
local function json(tbl)
    return game.HttpService:JSONEncode(tbl)
end
if getgenv().sock then pcall(function() getgenv().sock:Close() end) end
local socketed, message = xpcall(function()
    getgenv().sock = syn.websocket.connect('ws://localhost:3000')
    return 'using websocket for webhook calls'
end, function()
    return 'using syn.request aka syn.crash xdxdxdx'
end)
warn(message)
local socket = getgenv().sock
function edit(message, ...)
    if not socketed then
        local g = syn.request{
            Url = "https://(omit)",
            Method = "PATCH",
            Body = json{content = message, embeds = {...}},
            Headers ={['Content-Type'] = "application/json"}
        }
        return g
    end
    socket:Send(json{content = message, embeds = {...}})
end
--[[local thumbnailurl
if socketed then
    socket:Send(('av %d'):format(game.Players.LocalPlayer.UserId))
    thumbnailurl = socket.OnMessage:Wait()
else 
    do
        local json = syn.request{
            Url = ('https://thumbnails.roblox.com/v1/users/avatar-headshot?userIds=%d&size=48x48&format=Png&isCircular=false'):format(game.Players.LocalPlayer.UserId),
            Method = "GET",
        }.Body
        thumbnailurl = unjson(json).data[1].imageUrl
    end
end]]
local str = [[
local basepiece = Instance.new"Part"
basepiece.Anchored = true
basepiece.CanCollide = false
basepiece.Color = Color3.fromRGB(177,167,255)
basepiece.Transparency = 1
basepiece.Size = Vector3.new(4,4,4)
local spawns = Instance.new"Folder"
spawns.Name = 'SniperSpawns'
spawns.Parent = workspace.Map:FindFirstChildOfClass"Model"
assert(spawns.Parent, "No map loaded?")
]]
local str2 = [[
for i,v in pairs(cframes) do
    local new = basepiece:Clone()
    new.Parent = spawns
    new.CFrame = CFrame.new(unpack(v))
end
]]

edit('should work')
local x = function(v)
    if v:IsA"Model" and not table.find(unchecktbl, v.Name) then
        local snipes = v:WaitForChild("SniperSpawns", 20)
        if not snipes then
            edit("Unchecked map found \""..v.Name.."\" but no SniperSpawns folder was found...")
            return
        end
        task.wait(10)
        local cframes = {}
        for i,v in pairs(snipes:GetChildren()) do 
            table.insert(cframes,'{'..tostring(v.CFrame)..'}')
        end
        local cfrstr = "local cframes = {"
        for i,v in pairs(cframes) do cfrstr = cfrstr..v..", " end
        cfrstr = cfrstr:sub(1,-3)..'}'
        edit(nil,{title = v.Name,
          author = {name = 'Spawn count: ' .. #cframes},
          description = str..cfrstr..'\n'..str2,
          color = 0xffaa00,
          fields = {
              {
                  name = 'Maps got: ',
                  value = tostring(unchecktbl)
              }
          }
        })
        table.insert(unchecktbl, v.Name)
    end
end
if _G.snipesnipe then _G.snipesnipe:Disconnect() end
_G.snipesnipe = workspace.Map.ChildAdded:Connect(x)
x(workspace.Map:FindFirstChildOfClass"Model")