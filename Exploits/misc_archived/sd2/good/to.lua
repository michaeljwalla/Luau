local allrandom = false
--the most recent script i made, its just a black holer lol
--ports tping and fake touching too, pres backslash to open the command/input line

--[[

persist <Number> - time length to (attempt) to spam
spread <Number> - edit spread
rot <Number> - rotation speed (default 4e4)

tp- tp and touch
t <Name> - touch
p <Name> - tp

prefix with - if  you want to auto select all possible parts before running
prefix with r to make parts spam


]]

local rotMult = 4e4
local persistence = 2 --2s
local spread = 3 --randomizes pos in all axes from [-spread, spread]
local debris = game:GetService"Debris"
if _G.mouseClick then _G.mouseClick:Disconnect() end
if _G.updateBox then _G.updateBox:Disconnect() end
if _G.focusLock then _G.focusLock:Disconnect() end

old = hookmetamethod(game, '__index', newcclosure(function(self, index) --hey theres my  metamethod! : )
    if checkcaller() then
        if index == 'once' then
            return function(whatconnection, func)
                return coroutine.wrap(function() return func(self[whatconnection]:Wait()) end)()
            end
        end
        return old(self, index)
    end
    return old(self, index)
end))

if workspace:FindFirstChild"Select" then workspace.Select:Destroy() end
if game.CoreGui:FindFirstChild"SillyTp" then game.CoreGui.SillyTp:Destroy() end
local lp = game.Players.LocalPlayer
local mouse = lp:GetMouse()
local targets, ready = {}
local uis = game:GetService("UserInputService")
--[[local box = Instance.new("Part")
box.Name = 'Select'
box.CanCollide = false
box.Anchored = true
box.Transparency = 1
box.Parent = workspace]]
local storage = Instance.new("Folder")
storage.Name = 'Select'
storage.Parent = workspace

--[[local bp = Instance.new("BodyPosition")
bp.D = 0
bp.MaxForce = Vector3.one * 999999
bp.P = 999999]]
local function getrandomCharacter()
    local valid = {}
    for i,v in pairs(game.Players:GetPlayers()) do
        local char = v.Character
        char = char and (char:FindFirstChild"HumanoidRootPart" or char.PrimaryPart or char:FindFirstChildWhichIsA"BasePart")
        if char then valid[#valid+1] = char end
    end
        return valid[math.random(1,#valid)]
end
local locks = {}
local function lockInPlace(part, pos, time)
    if allrandom then
        pos = getrandomCharacter()
        print('hi')
    end
    locks[part] = {pos, {tick(), time}}
end
local ccd = {}
local function uncc(part, time)
    local curTick = tick()
    if ccd[part] then part.CanCollide = {curTick, ccd[part]} end
    
    local collideable = part.CanCollide
    ccd[part] = {curTick, collideable}
    part.CanCollide = false
    task.delay(time, function()
        if ccd[part][1] ~= curTick then return end
        part.CanCollide = collideable
        rawset(ccd, part, nil)
    end)
end
local function touch(part1,part2)
    firetouchinterest(part1,part2,0)
    firetouchinterest(part1,part2,1)
    return
end
local function playerFromFragment(str)
    str = str:lower()
    for i,v in pairs(game.Players:GetPlayers()) do
        if v.Name:lower():find(str) == 1 then
            return v.Character
        end
    end
    return false
end

local function addselection(part)
    local selection = Instance.new("SelectionBox")
    --selection.Adornee = box
    selection.Adornee = part
    selection.Parent = storage --box
    return selection
end

local cons = {}
local function listenForRemove(part)
    if not part or cons[part] then return end
    cons[part] = true
    part.once("AncestryChanged", function()
        if targets[part] and targets[part].Parent then targets[part]:Destroy() end
        rawset(targets, part, nil)
        rawset(cons, part, nil)
        return
    end)
end
local function getSpread()
    return Vector3.new((math.random()-0.5)*spread,(math.random()-0.5)*spread,(math.random()-0.5)*spread)
end
local function globalupdate()
    storage:ClearAllChildren()
    targets = {}
    local char = lp.Character
    for i,v in pairs(workspace:GetDescendants()) do
        if v:IsA("BasePart") and not v:IsDescendantOf(char) and isnetworkowner(v) then
            targets[v] = addselection(v)
            listenForRemove(v)
        end
    end
    return
end
local function randomVector()
    return Vector3.new(math.random(),math.random(),math.random()).Unit
end
_G.mouseClick = mouse.Button1Down:Connect(function()
    local targ = mouse.Target
    if not targ then
        return
    elseif targets[targ] then
        targets[targ]:Destroy()
        rawset(targets, targ, nil)
        return
    end
    if not uis:IsKeyDown(Enum.KeyCode.LeftControl) then
        storage:ClearAllChildren()
        targets = {}
    elseif uis:IsKeyDown(Enum.KeyCode.LeftShift) then
        globalupdate()
        return
    end
    
    --[[local model = targ:FindFirstAncestorWhichIsA("Model")
    if model and model.PrimaryPart then
        target = model.PrimaryPart
        box.Size = model:GetExtentsSize()
        return
    end]]
    targets[targ] = addselection(targ)
    listenForRemove(v)
end)
_G.updateBox = game.RunService.RenderStepped:Connect(function()
    for target, selection in pairs(targets) do
        local anchored = (target.Anchored or target:IsGrounded())
        
        if anchored or not isnetworkowner(target) then
            ready = false
            local maybe = not anchored and target:GetConnectedParts()
            if maybe and #maybe > 1 then
                for i,v in pairs(maybe) do
                    if v:IsA"BasePart" and isnetworkowner(v) then
                        targets[v] = targets[target]
                        selection.Color3 = Color3.new(0.5,0,0.5)
                        ready = true
                    end
                end
            end
            if ready then continue end
            selection.Color3 = Color3.new()
        else
            selection.Color3 = Color3.new(0.5,0,0.5)
            ready = true
        end
    end
    for part, data in pairs(locks) do
        if tick() - data[2][1] >= data[2][2] then rawset(locks, part, nil) continue end
        local pos = (typeof(data[1]) == 'Instance' and data[1].Position + data[1].Velocity/2) or data[1]
        part.CFrame = CFrame.new(pos + getSpread()) * part.CFrame.Rotation
        part.Velocity = Vector3.zero
    end
end)

local container = Instance.new("ScreenGui", game.CoreGui)
container.Name = 'SillyTp'
local main = Instance.new("TextBox", container)
main.Size = UDim2.new(0,250,0,25)
main.BackgroundColor3 = Color3.new()
main.BorderSizePixel = 0
main.BackgroundTransparency = 0.5
main.TextColor3 = Color3.new(1,1,1)
main.Text = ''
main.Font = 'Gotham'
main.Position = UDim2.new(1,-250,0.5,-main.Size.Y.Offset/2)
main.TextSize = 18
main.Visible = false
local lastfocus = tick() - 5

_G.focusLock = uis.InputEnded:Connect(function(key, focused)
    if (focused or key.KeyCode ~= Enum.KeyCode.N) then return end
    lastfocus = tick()
    main.Visible = true
    main:CaptureFocus()
end)
main.FocusLost:Connect(function()
    lastfocus = tick()
    task.delay(5,function()
        if tick() - lastfocus >= 5 then main.Visible = false end
    end)
    local msg = main.Text:split(" ")
    local spin = false
    if not msg[2] then return end
    if msg[1] == 'persist' and tonumber(msg[2]) then
        persistence = math.clamp(tonumber(msg[2]), 0, 30)
        main.Text = msg[1]..' '..persistence
        return
    elseif msg[1] == 'spread' and tonumber(msg[2]) then
        spread = math.clamp(tonumber(msg[2]), 0, 100)
        main.Text = msg[1]..' '..spread
        return
    elseif msg[1] == 'rot' and tonumber(msg[2]) then
        rotMult = tonumber(msg[2])
        main.Text = msg[1]..' '..rotMult
        return
    end
    if msg[1]:match("^%-") then
        globalupdate()
        msg[1] = msg[1]:sub(2,-1)
    end
    if msg[1]:match("^r") then
        spin = true
        msg[1] = msg[1]:sub(2,-1)
    end
    if msg[1] == 'tp' then
        local char = playerFromFragment(msg[2]:gsub("%s", ""))
        char = char:FindFirstChild"HumanoidRootPart" or char.PrimaryPart or char:FindFirstChildWhichIsA"BasePart"
        if not (allrandom or char) then return end
        main.Text = msg[1]..' '..char.Parent.Name
        for part, selection in pairs(targets) do
            if part.Parent and not (part.Anchored or part:IsGrounded()) then
                part.CFrame = char.CFrame + getSpread()
                if spin then
                    local what = char
                    uncc(part, persistence)
                    --task.defer(function()
                        part.RotVelocity = randomVector()*rotMult
                        lockInPlace( part, what--[[part.Position]], persistence)
                    --end)
                end
                task.delay(0.1, function()
                    touch(part, char)
                end)
                continue
            end
        end
    elseif msg[1] == 'p' then
        local char = playerFromFragment(msg[2]:gsub("%s", ""))
        char = char:FindFirstChild"HumanoidRootPart" or char.PrimaryPart or char:FindFirstChildWhichIsA"BasePart"
        if not char then return end
        main.Text = msg[1]..' '..char.Parent.Name
        for part, selection in pairs(targets) do
            if part.Parent and not (part.Anchored or part:IsGrounded()) and isnetworkowner(part) then
                part.CFrame = char.CFrame + getSpread()
                if spin then
                    local what = char
                    uncc(part, persistence)
                    --task.defer(function()
                        part.RotVelocity = randomVector()*rotMult
                        lockInPlace(part, what--[[part.Position]], persistence)
                    --end)
                end
                continue
            end
        end
    elseif msg[1] == 't' then
        local char = playerFromFragment(msg[2]:gsub("%s", ""))
        char = char:FindFirstChild"HumanoidRootPart" or char.PrimaryPart or char:FindFirstChildWhichIsA"BasePart"
        if not char then return end
        main.Text = msg[1]..' '..char.Parent.Name
        for part, selection in pairs(targets) do
            if part.Parent and not (part.Anchored or part:IsGrounded()) and isnetworkowner(part) then
                task.delay(0.1, function()
                    touch(part, char)
                end)
                continue
            end
        end
    end
end)