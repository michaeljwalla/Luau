local gears = require(game.ReplicatedStorage.Modules.Gear)
local ordered = gears.orderedGear
local find = table.find
local function f(gear)
    gear = typeof(gear) == 'number' and ordered[gear] or gear
    if gear:find"^rbx" then --search by rbxassetid
        gear = tonumber(gear:match"%d+$")
        if not gear then return end
        for i,v in next, gears.gears do
            if v.Image == gear then
                return {Data = v, Index = find(ordered, v.Name)}
            end
        end
    else--search by name
        gear = gear:lower()
        for i,v in next, gears.gears do
            if v.Name and v.Name:lower() == gear then
                return {Data = v, Index = find(ordered, v.Name)}
            end
        end
    end

    
    return
end
local module = setmetatable({Module = gears}, {
    __index = function(self, index)
        if index == false then return false end
        local found = f(index)
        if not found then return nil end
        rawset(self, index, found)
        return found
    end})

local lp = game.Players.LocalPlayer
local wait = task.wait
local buy = game:GetService("ReplicatedStorage").Remotes.BuyItem
local function buykit(e, waittime)
	buy:FireServer(e)
	wait(waittime)
end
function module:buy(name, waittime, soft)
    waittime = waittime or 0
    if (not self[name] or (soft and self:has(name))) then
        return
    elseif self:has(name) then
        waittime = waittime * 0.5
        buykit(self[name].Index, waittime)
    end
    buykit(self[name].Index, waittime)
end
function module:current()
    return lp.Character and lp.Character:FindFirstChildWhichIsA"Tool"
end
function module:sell(name, waittime)
    waittime = waittime or 0
    if not (self[name] and self:has(name)) then
        return
    end
    buykit(self[name].Index, waittime)
end
function module:has(n)
    return lp:FindFirstChild"Backpack" and (lp.Backpack:FindFirstChild(n) or (lp.Character and lp.Character:FindFirstChild(n)))
end
return module