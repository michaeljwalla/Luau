local walker = loadstring(readfile"bell/walkmodule.lua")()
setfenv(1, walker.fenv)
local morsifier = loadstring(game:HttpGet"https://raw.githubusercontent.com/michaeljwalla/luatools/main/justmorse.lua")()
local ins = table.insert
local remotes = game.ReplicatedStorage.Events
local hcombs = workspace.Honeycombs
local function hiveisopen(n)
    local h = "Hive"..(n+2)
    return hcombs:FindFirstChild(h) and hcombs[h].Owner.Value == nil
end
local function getopenhive(spec)
    local hive, wasclaimed = -1, false
    for i = 3, 8 do
        local athive = hcombs['Hive'..i]
        if athive.Owner.Value == lp then return i, true
        elseif hiveisopen(i-2) and (spec == nil or i == spec+2) then hive = i end
    end
    return hive, wasclaimed
end
--claims hive x, if x not specified or x is taken, takes the NEXT hive
local claimOrReturnToHive; claimOrReturnToHive = function(specific)
    if specific then specific = math.floor(specific,1,6) end
    local hive, wasclaimed, root, pos = getopenhive(specific)
    --if hive == -1 then return end
    local hcomb = hcombs['Hive'..(hive)]
    pos = hcomb.SpawnPos.Value.p
    
    local exit = self.MapOptions:Align(pos)
    if wasclaimed then return end
    root = getroot()
    local checker = hiveisopen(hive-2)
    if not checker then claimOrReturnToHive() return elseif (root and (root.Position - pos).Magnitude > 5) then claimOrReturnToHive(specific) return end
    remotes.ClaimHive:FireServer(hive-2)
    task.wait(1)
    if not hiveisopen(hive-2) or hcomb.Owner.Value ~= lp then claimOrReturnToHive() end
    return
end
claimOrReturnToHive(5)
--print(getopenhive(2))
--walker:FollowMap(claimhives)