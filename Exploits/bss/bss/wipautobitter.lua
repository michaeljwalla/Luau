column = 5 -- column 1-5, left to right
row = 1 -- row 1-10, down to up


local increment = 5

local max = 5000
mutationType = "convert" --this does nothing (its forced to bar)


minMutPercent = 1 --%min, i would prob leave at 1-2 maybe 3


--ignore stuff below this line
beeName = "None" --this does nothing(its forced to bar)
beeType = "None" --this does nothing(its forced to bar)




repeats = -1 -- use max value instead (ignore this)

mutation = {
    ["bar"] = "Ability Rate",
    ["convert"] = "Convert Amount",
    ["gather"] = "Gather Amount",
    ["attack"] = "Attack",
    ["energy"] = "Energy",
    ["None"] = "None"
}


function reroll()
    --wait()
    local A_1 = column
    local A_2 = row -- row, down to up
    local A_3 = "Bitterberry"
    local A_4 = increment
    local A_5 = false --idk

    local Event = game:GetService("ReplicatedStorage").Events.ConstructHiveCellFromEgg
    Event:InvokeServer(A_1, A_2, A_3, A_4, A_5)

    update()
end

bee = "None"

local percent
function findNum(input)
    local str = input
    local t = {}
    for i = 1, #str do
        t[i] = str:sub(i, i)
    end

    local ctr = 0
    percent = 0
    for a,b in pairs(t) do
        if tonumber(b) ~= nil and ctr == 1 then
            percent = percent * 10
            percent = percent + b
            ctr = 0
            else if tonumber(b) ~= nil and ctr == 0 then
                percent = percent + b
                ctr = ctr + 1
            end
        end
    end
    return percent
end

found = false

typed = false
function update()
    bee = game.Players.LocalPlayer.PlayerGui.ScreenGui.BeePopUp.TypeName.Text
    bType = game.Players.LocalPlayer.PlayerGui.ScreenGui.BeePopUp.ColorAndRarity.Text
    mutated = game.Players.LocalPlayer.PlayerGui.ScreenGui.BeePopUp.MutationFrame.MutationLabel.Text
    if typed then
        bee = bType
        beeName = beeType
    end
    
end
ctr = 1
pos = game.Workspace[game.Players.LocalPlayer.Name].HumanoidRootPart.Position

reroll()

function ignoreMutate()
    while found == false and ctr < repeats and game.Workspace[game.Players.LocalPlayer.Name].HumanoidRootPart.Position == pos do
        if (bee:find(beeName) == nil) then
            print(bee..'~ (re)try #'..ctr)
            reroll()
        else do
            print(bee..'~ (re)try #'..ctr)
            found = true
        end
        end
        update()
        ctr = ctr + 1
    end
end
function mutateOnly()

	local sum = 0
    while sum < max and found == false and ctr < repeats and game.Workspace[game.Players.LocalPlayer.Name].HumanoidRootPart.Position == pos do
        sum = sum + increment
        
if (mutated:find(mutation[mutationType]) == nil) then
            print(mutated..'~ (re)try #'..ctr)
            reroll()
        else do
            if findNum(mutated) >= minMutPercent then
                found = true
                print('found!-- '..mutated..'~ (re)try #'..ctr)
            else do
                print(mutated..'~ (re)try #'..ctr)
                reroll()
            end
            end
        end
        end

        update()
        ctr = ctr + 1
    end
end
function both()
    while found == false and ctr < repeats and game.Workspace[game.Players.LocalPlayer.Name].HumanoidRootPart.Position == pos do
        if (mutated:find(mutation[mutationType]) == nil or bee:find(beeName) == nil) then
            print(bee..', '..mutated..'~ (re)try #'..ctr)
            reroll()
        else do
             if findNum(mutated) >= minMutPercent then
                found = true
                print(bee..', '..mutated..'~ (re)try #'..ctr)
            else do
                print(bee..', '..mutated..'~ (re)try #'..ctr)
                reroll()
            end
            end
        end
        end

        update()
    
        ctr = ctr + 1
    end
end

if repeats == -1 then
    repeats = 9999999999 --its not actually infiniteðŸ¤¯
end

if (beeType ~= "None" and beeName ~= "None") or (beeName == "None" and beeType ~= "None") then    
typed = true
update()
end
mutateOnly()
